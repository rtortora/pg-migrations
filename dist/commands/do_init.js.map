{"version":3,"sources":["../../src/commands/do_init.js"],"names":["FS","require","Path","CONFIG_FILENAME","module","exports","host","path","join","rootPath","exists","writeFile","console","log","doInit"],"mappings":";;;;;;AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAC,YAAD,CAAlB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,MAAM;AAAEE,EAAAA;AAAF,IAAsBF,OAAO,CAAC,oBAAD,CAAnC;;AAEAG,MAAM,CAACC,OAAP;AAAA;AAAA;AAAA,kCAAiB,WAAsBC,IAAtB,EAA4B;AAC3C,UAAMC,IAAI,GAAGL,IAAI,CAACM,IAAL,CAAUF,IAAI,CAACG,QAAf,EAAyBN,eAAzB,CAAb;;AACA,QAAI,QAAQH,EAAE,CAACU,MAAH,CAAUH,IAAV,CAAR,CAAJ,EAA8B;AAC5B,YAAMP,EAAE,CAACW,SAAH,CAAaJ,IAAb,EAAoB;;;;;;;;GAApB,CAAN;AASAK,MAAAA,OAAO,CAACC,GAAR,CAAa,qBAAoBN,IAAK,EAAtC;AACD,KAXD,MAWO;AACLK,MAAAA,OAAO,CAACC,GAAR,CAAa,yBAAwBN,IAAK,EAA1C;AACD;AACF,GAhBD;;AAAA,WAAgCO,MAAhC;AAAA;AAAA;;AAAA,SAAgCA,MAAhC;AAAA","sourcesContent":["const FS = require('async-file');\nconst Path = require('path');\nconst { CONFIG_FILENAME } = require('../migrations_host');\n\nmodule.exports = async function doInit(host) {\n  const path = Path.join(host.rootPath, CONFIG_FILENAME);\n  if (!(await FS.exists(path))) {\n    await FS.writeFile(path, `module.exports = {\n  migrationsTableName: \"migrations\",\n  migrationsPath: \"./migrations/\",\n  getConnection: async ()=>{\n    const pg = /* do stuff to get a single pg client to your database */\n    return pg;\n  }\n}\n  `);\n    console.log(`Wrote skeleton to ${path}`);\n  } else {\n    console.log(`Already configured at ${path}`);\n  }\n}\n"],"file":"do_init.js"}